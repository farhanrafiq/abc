{% extends "base_premium.html" %}

{% block title %}ABC Publishing Kashmir - Premier Islamic Literature & Books{% endblock %}

{% block content %}
<!-- Hero Carousel Section -->
{% if hero_banners %}
<section class="hero-carousel">
    <div id="heroCarousel" class="carousel slide" data-bs-ride="carousel" data-bs-interval="5000">
        <div class="carousel-indicators">
            {% for banner in hero_banners %}
            <button type="button" data-bs-target="#heroCarousel" data-bs-slide-to="{{ loop.index0 }}" 
                    {% if loop.first %}class="active"{% endif %}></button>
            {% endfor %}
        </div>
        
        <div class="carousel-inner">
            {% for banner in hero_banners %}
            <div class="carousel-item {% if loop.first %}active{% endif %}">
                <div class="hero-premium" style="{% if banner.image_url %}background-image: linear-gradient(var(--gradient-overlay)), url('{{ banner.image_url }}');{% endif %}">
                    <div class="container">
                        <div class="row align-items-center min-vh-80">
                            <div class="col-lg-8">
                                <div class="hero-content animate-fadeInUp">
                                    <h1 class="hero-title">{{ banner.title }}</h1>
                                    {% if banner.subtitle %}
                                        <p class="hero-subtitle">{{ banner.subtitle }}</p>
                                    {% endif %}
                                    {% if banner.description %}
                                        <p class="hero-description">{{ banner.description }}</p>
                                    {% endif %}
                                    
                                    {% if banner.link_url %}
                                        <div class="d-flex gap-3 flex-wrap mt-4">
                                            <a href="{{ banner.link_url }}" class="btn-premium">
                                                <i class="fas fa-arrow-right"></i>
                                                {{ banner.link_text or 'Learn More' }}
                                            </a>
                                            <a href="{{ url_for('web.catalog') }}" class="btn-premium-outline">
                                                <i class="fas fa-book-open"></i>
                                                Browse Books
                                            </a>
                                        </div>
                                    {% endif %}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
        
        <button class="carousel-control-prev" type="button" data-bs-target="#heroCarousel" data-bs-slide="prev">
            <span class="carousel-control-prev-icon"></span>
        </button>
        <button class="carousel-control-next" type="button" data-bs-target="#heroCarousel" data-bs-slide="next">
            <span class="carousel-control-next-icon"></span>
        </button>
    </div>
</section>
{% else %}
<!-- Default Hero Section when no banners are set -->
<section class="hero-premium">
    <div class="container">
        <div class="row align-items-center">
            <div class="col-lg-7">
                <div class="hero-content animate-fadeInUp">
                    <h1 class="hero-title">
                        Discover the World's Finest
                        <span style="color: var(--secondary-gold);">Islamic Literature</span>
                    </h1>
                    <p class="hero-subtitle">
                        From classical Quranic commentaries to contemporary Islamic thought - 
                        explore our curated collection of authentic books that inspire, educate, and enlighten.
                    </p>
                    
                    <div class="hero-stats animate-delay-1">
                        <div class="stat-item">
                            <span class="stat-number">10,000+</span>
                            <span class="stat-label">Islamic Books</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">500+</span>
                            <span class="stat-label">Renowned Authors</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">38</span>
                            <span class="stat-label">Years Legacy</span>
                        </div>
                        <div class="stat-item">
                            <span class="stat-number">50,000+</span>
                            <span class="stat-label">Happy Customers</span>
                        </div>
                    </div>
                    
                    <div class="d-flex gap-3 flex-wrap animate-delay-2">
                        <a href="{{ url_for('web.catalog') }}" class="btn-premium">
                            <i class="fas fa-book-open"></i>
                            Explore Collection
                        </a>
                        <a href="{{ url_for('web.catalog', category_slug='tafaseer-ul-quran') }}" class="btn-premium-outline">
                            <i class="fas fa-quran"></i>
                            Tafaseer Books
                        </a>
                    </div>
                </div>
            </div>
            <div class="col-lg-5">
                <div class="text-center animate-fadeInUp animate-delay-3">
                    <img src="https://images.unsplash.com/photo-1481627834876-b7833e8f5570?ixlib=rb-4.0.3&auto=format&fit=crop&w=800&q=80" 
                         alt="Islamic Books Collection" 
                         class="img-fluid" 
                         style="border-radius: 20px; box-shadow: 0 20px 40px var(--shadow-medium); max-height: 500px; object-fit: cover;">
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<!-- Trust Indicators -->
<section class="py-4" style="background: white; border-bottom: 1px solid rgba(27, 42, 78, 0.08);">
    <div class="container">
        <div class="row text-center g-4">
            <div class="col-6 col-md-3">
                <div class="d-flex align-items-center justify-content-center gap-2">
                    <i class="fas fa-shield-alt text-warning fa-lg"></i>
                    <small class="fw-semibold">Authentic Sources</small>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="d-flex align-items-center justify-content-center gap-2">
                    <i class="fas fa-truck text-warning fa-lg"></i>
                    <small class="fw-semibold">Free Shipping</small>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="d-flex align-items-center justify-content-center gap-2">
                    <i class="fas fa-undo text-warning fa-lg"></i>
                    <small class="fw-semibold">Easy Returns</small>
                </div>
            </div>
            <div class="col-6 col-md-3">
                <div class="d-flex align-items-center justify-content-center gap-2">
                    <i class="fas fa-phone text-warning fa-lg"></i>
                    <small class="fw-semibold">24/7 Support</small>
                </div>
            </div>
        </div>
    </div>
</section>

<!-- Featured Categories -->
<section class="section-premium">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Explore Our Collections</h2>
            <p class="subtitle">Discover authentic Islamic literature across diverse categories</p>
        </div>
        
        <div class="category-grid">
            {% for category in featured_categories[:6] if featured_categories %}
            <div class="category-card-premium animate-fadeInUp animate-delay-{{ loop.index }}">
                <div class="category-icon-premium">
                    {% if 'tafaseer' in category.slug %}
                        <i class="fas fa-book-quran"></i>
                    {% elif 'hadith' in category.slug %}
                        <i class="fas fa-scroll"></i>
                    {% elif 'seerat' in category.slug %}
                        <i class="fas fa-user"></i>
                    {% elif 'fiqh' in category.slug %}
                        <i class="fas fa-balance-scale"></i>
                    {% elif 'tasawwuf' in category.slug %}
                        <i class="fas fa-heart"></i>
                    {% else %}
                        <i class="fas fa-book"></i>
                    {% endif %}
                </div>
                <h3 class="category-title">{{ category.name }}</h3>
                <p class="category-description">
                    {% if category.description %}
                        {{ category.description[:120] }}...
                    {% else %}
                        Explore our comprehensive collection of {{ category.name.lower() }} books from renowned scholars.
                    {% endif %}
                </p>
                <a href="{{ url_for('web.catalog', category_slug=category.slug) }}" class="btn-premium">
                    Browse Books <i class="fas fa-arrow-right ms-2"></i>
                </a>
            </div>
            {% else %}
            <!-- Default categories if no featured categories -->
            <div class="category-card-premium">
                <div class="category-icon-premium">
                    <i class="fas fa-book-quran"></i>
                </div>
                <h3 class="category-title">Tafaseer-ul-Quran</h3>
                <p class="category-description">
                    Comprehensive commentaries and explanations of the Holy Quran by renowned Islamic scholars.
                </p>
                <a href="{{ url_for('web.catalog') }}" class="btn-premium">
                    Browse Books <i class="fas fa-arrow-right ms-2"></i>
                </a>
            </div>
            <div class="category-card-premium">
                <div class="category-icon-premium">
                    <i class="fas fa-scroll"></i>
                </div>
                <h3 class="category-title">Hadith Collections</h3>
                <p class="category-description">
                    Authentic collections of Prophet Muhammad's (PBUH) sayings, actions, and traditions.
                </p>
                <a href="{{ url_for('web.catalog') }}" class="btn-premium">
                    Browse Books <i class="fas fa-arrow-right ms-2"></i>
                </a>
            </div>
            <div class="category-card-premium">
                <div class="category-icon-premium">
                    <i class="fas fa-heart"></i>
                </div>
                <h3 class="category-title">Tasawwuf & Spirituality</h3>
                <p class="category-description">
                    Islamic mysticism, spiritual development, and the journey of the soul towards Allah.
                </p>
                <a href="{{ url_for('web.catalog') }}" class="btn-premium">
                    Browse Books <i class="fas fa-arrow-right ms-2"></i>
                </a>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Featured Books Showcase -->
<section class="section-premium section-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Featured Islamic Literature</h2>
            <p class="subtitle">Handpicked books from our curated collection</p>
        </div>
        
        <div class="product-grid">
            {% for product in featured_products[:8] if featured_products %}
            <div class="product-card-premium animate-fadeInUp animate-delay-{{ (loop.index - 1) % 4 + 1 }}">
                <div class="product-image-container">
                    {% if product.cover_image %}
                        <img src="{{ url_for('static', filename='uploads/products/' + product.cover_image) }}" 
                             alt="{{ product.title }}" class="product-image">
                    {% else %}
                        <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" 
                             alt="{{ product.title }}" class="product-image">
                    {% endif %}
                    {% if product.is_bestseller %}
                        <div class="product-badge">Bestseller</div>
                    {% elif product.is_new %}
                        <div class="product-badge">New Arrival</div>
                    {% endif %}
                </div>
                <div class="product-content">
                    {% if product.categories %}
                        <div class="product-category">{{ product.categories[0].name }}</div>
                    {% endif %}
                    <h3 class="product-title">{{ product.title }}</h3>
                    {% if product.authors %}
                        <p class="product-author">by {{ product.authors[0].name }}</p>
                    {% endif %}
                    {% if product.language %}
                        <span class="product-language">{{ product.language }}</span>
                    {% endif %}
                    {% if product.average_rating %}
                        <div class="product-rating">
                            <div class="stars">
                                {% for i in range(1, 6) %}
                                    {% if i <= product.average_rating %}
                                        <i class="fas fa-star"></i>
                                    {% elif i - 0.5 <= product.average_rating %}
                                        <i class="fas fa-star-half-alt"></i>
                                    {% else %}
                                        <i class="far fa-star"></i>
                                    {% endif %}
                                {% endfor %}
                            </div>
                            <span class="rating-count">({{ product.review_count or 0 }})</span>
                        </div>
                    {% endif %}
                    <div class="product-price">
                        <div>
                            {% if product.price %}
                                <span class="price-current">₹{{ "%.0f"|format(product.price.sale_inr / 100) }}</span>
                                {% if product.price.mrp_inr > product.price.sale_inr %}
                                    <span class="price-original">₹{{ "%.0f"|format(product.price.mrp_inr / 100) }}</span>
                                {% endif %}
                            {% endif %}
                        </div>
                        <button class="add-to-cart-btn" data-product-id="{{ product.id }}">
                            <i class="fas fa-cart-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
            {% else %}
            <!-- Sample products -->
            {% for i in range(8) %}
            <div class="product-card-premium">
                <div class="product-image-container">
                    <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" 
                         alt="Book Cover" class="product-image">
                    <div class="product-badge">New</div>
                </div>
                <div class="product-content">
                    <div class="product-category">Islamic Literature</div>
                    <h3 class="product-title">Tafseer Ibn Kathir</h3>
                    <p class="product-author">by Imam Ibn Kathir</p>
                    <span class="product-language">Arabic</span>
                    <div class="product-rating">
                        <div class="stars">
                            <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                        </div>
                        <span class="rating-count">(124)</span>
                    </div>
                    <div class="product-price">
                        <div>
                            <span class="price-current">₹7,000</span>
                            <span class="price-original">₹9,000</span>
                        </div>
                        <button class="add-to-cart-btn">
                            <i class="fas fa-cart-plus"></i>
                        </button>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% endfor %}
        </div>
        
        <div class="text-center mt-5">
            <a href="{{ url_for('web.catalog') }}" class="btn-premium">
                View Complete Collection <i class="fas fa-arrow-right ms-2"></i>
            </a>
        </div>
    </div>
</section>

<!-- Author Spotlight -->
<section class="section-premium section-cream">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Featured Islamic Scholars</h2>
            <p class="subtitle">Meet the renowned authors whose works inspire millions</p>
        </div>
        
        <div class="row g-4">
            {% set featured_authors = [
                {
                    'name': 'Dr. Israr Ahmed',
                    'image': 'https://images.unsplash.com/photo-1472099645785-5658abf4ff4e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',
                    'bio': 'Renowned Pakistani Islamic scholar and founder of Tanzeem-e-Islami, famous for his Quranic commentaries.',
                    'books': 'Tafseer Bayan-ul-Quran, Quran Aur Jadeed Science'
                },
                {
                    'name': 'Imam Al-Ghazali',
                    'image': 'https://images.unsplash.com/photo-1507003211169-0a1dd7228f2d?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',
                    'bio': 'Medieval Muslim theologian and mystic known as "Hujjat al-Islam" (Proof of Islam).',
                    'books': 'Ihya Ulum-ud-Din, Kimiya-e-Saadat'
                },
                {
                    'name': 'Allama Iqbal',
                    'image': 'https://images.unsplash.com/photo-1500648767791-00dcc994a43e?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80',
                    'bio': 'Poet-philosopher of the East and spiritual father of Pakistan, known for his philosophical poetry.',
                    'books': 'Bang-e-Dara, Bal-e-Jibril, Kulliyat-e-Iqbal'
                }
            ] %}
            
            {% for author in featured_authors %}
            <div class="col-lg-4">
                <div class="author-spotlight animate-fadeInUp animate-delay-{{ loop.index }}">
                    <img src="{{ author.image }}" alt="{{ author.name }}" class="author-image">
                    <div class="author-info">
                        <h4>{{ author.name }}</h4>
                        <p class="author-bio">{{ author.bio }}</p>
                        <p class="author-books"><strong>Notable Works:</strong> {{ author.books }}</p>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Best Sellers -->
<section class="section-premium section-dark">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title" style="color: white;">Best Selling Books</h2>
            <p class="subtitle" style="color: rgba(255, 255, 255, 0.8);">Most loved books by our customers</p>
        </div>
        
        <div class="row g-4">
            {% for product in bestsellers[:6] if bestsellers %}
            <div class="col-lg-4 col-md-6">
                <div class="product-card-premium">
                    <div class="product-image-container">
                        {% if product.cover_image %}
                            <img src="{{ url_for('static', filename='uploads/products/' + product.cover_image) }}" 
                                 alt="{{ product.title }}" class="product-image">
                        {% else %}
                            <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" 
                                 alt="{{ product.title }}" class="product-image">
                        {% endif %}
                        <div class="product-badge">Bestseller</div>
                    </div>
                    <div class="product-content">
                        {% if product.categories %}
                            <div class="product-category">{{ product.categories[0].name }}</div>
                        {% endif %}
                        <h3 class="product-title">{{ product.title }}</h3>
                        {% if product.authors %}
                            <p class="product-author">by {{ product.authors[0].name }}</p>
                        {% endif %}
                        <div class="product-rating">
                            <div class="stars">
                                {% for i in range(1, 6) %}
                                    <i class="fas fa-star"></i>
                                {% endfor %}
                            </div>
                            <span class="rating-count">({{ product.review_count or 89 }})</span>
                        </div>
                        <div class="product-price">
                            <div>
                                {% if product.price %}
                                    <span class="price-current">₹{{ "%.0f"|format(product.price.sale_inr / 100) }}</span>
                                    {% if product.price.mrp_inr > product.price.sale_inr %}
                                        <span class="price-original">₹{{ "%.0f"|format(product.price.mrp_inr / 100) }}</span>
                                    {% endif %}
                                {% endif %}
                            </div>
                            <button class="add-to-cart-btn" data-product-id="{{ product.id }}">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% else %}
            <!-- Sample bestsellers -->
            {% for i in range(6) %}
            <div class="col-lg-4 col-md-6">
                <div class="product-card-premium">
                    <div class="product-image-container">
                        <img src="https://images.unsplash.com/photo-1544716278-ca5e3f4abd8c?ixlib=rb-4.0.3&auto=format&fit=crop&w=400&q=80" 
                             alt="Bestseller Book" class="product-image">
                        <div class="product-badge">Bestseller</div>
                    </div>
                    <div class="product-content">
                        <div class="product-category">Islamic Literature</div>
                        <h3 class="product-title">Sahih Bukhari</h3>
                        <p class="product-author">by Imam Bukhari</p>
                        <div class="product-rating">
                            <div class="stars">
                                <i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i><i class="fas fa-star"></i>
                            </div>
                            <span class="rating-count">(256)</span>
                        </div>
                        <div class="product-price">
                            <div>
                                <span class="price-current">₹4,000</span>
                                <span class="price-original">₹5,000</span>
                            </div>
                            <button class="add-to-cart-btn">
                                <i class="fas fa-cart-plus"></i>
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
            {% endfor %}
        </div>
    </div>
</section>

<!-- Customer Testimonials -->
<section class="section-premium">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">What Our Customers Say</h2>
            <p class="subtitle">Trusted by thousands of readers across Kashmir and beyond</p>
        </div>
        
        <div class="row g-4">
            {% set testimonials = [
                {
                    'name': 'Ahmed Khan',
                    'role': 'Islamic Studies Teacher',
                    'quote': 'ABC Publishing has been my go-to source for authentic Islamic literature. Their collection is unmatched and the quality is exceptional.',
                    'rating': 5
                },
                {
                    'name': 'Fatima Malik',
                    'role': 'Student of Islamic Philosophy',
                    'quote': 'I have been purchasing books from ABC Publishing for years. Their customer service is excellent and delivery is always on time.',
                    'rating': 5
                },
                {
                    'name': 'Dr. Mohammad Tariq',
                    'role': 'University Professor',
                    'quote': 'The authenticity and quality of books from ABC Publishing is remarkable. I recommend them to all my students and colleagues.',
                    'rating': 5
                }
            ] %}
            
            {% for testimonial in testimonials %}
            <div class="col-lg-4">
                <div class="testimonial-card animate-fadeInUp animate-delay-{{ loop.index }}">
                    <div class="testimonial-quote">"{{ testimonial.quote }}"</div>
                    <div class="testimonial-rating mb-3">
                        {% for i in range(testimonial.rating) %}
                            <i class="fas fa-star text-warning"></i>
                        {% endfor %}
                    </div>
                    <div class="testimonial-author">{{ testimonial.name }}</div>
                    <div class="testimonial-role">{{ testimonial.role }}</div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</section>

<!-- Newsletter Section -->
<section class="newsletter-section">
    <div class="container">
        <h2 style="color: white; margin-bottom: 1rem;">Stay Connected with Islamic Knowledge</h2>
        <p style="color: rgba(255, 255, 255, 0.9); font-size: 1.1rem;">
            Subscribe to our newsletter for new book arrivals, exclusive offers, and Islamic educational content
        </p>
        <form class="newsletter-form">
            <input type="email" placeholder="Enter your email address" class="newsletter-input" required>
            <button type="submit" class="btn-premium">
                <i class="fas fa-paper-plane"></i>
                Subscribe
            </button>
        </form>
        <p style="color: rgba(255, 255, 255, 0.7); font-size: 0.9rem; margin-top: 1rem;">
            Join 25,000+ subscribers. We respect your privacy and never spam.
        </p>
    </div>
</section>

<!-- Why Choose Us -->
<section class="section-premium section-light">
    <div class="container">
        <div class="text-center mb-5">
            <h2 class="section-title">Why Choose ABC Publishing Kashmir</h2>
            <p class="subtitle">Your trusted partner in Islamic education since 1987</p>
        </div>
        
        <div class="row g-4">
            <div class="col-lg-3 col-md-6 text-center">
                <div class="category-icon-premium mb-3" style="margin: 0 auto;">
                    <i class="fas fa-certificate"></i>
                </div>
                <h5>Authentic Sources</h5>
                <p>Only verified and authentic Islamic texts from renowned scholars and trusted publishers worldwide.</p>
            </div>
            <div class="col-lg-3 col-md-6 text-center">
                <div class="category-icon-premium mb-3" style="margin: 0 auto;">
                    <i class="fas fa-globe"></i>
                </div>
                <h5>Global Collection</h5>
                <p>Books in Arabic, Urdu, English, and other languages from publishers across the Islamic world.</p>
            </div>
            <div class="col-lg-3 col-md-6 text-center">
                <div class="category-icon-premium mb-3" style="margin: 0 auto;">
                    <i class="fas fa-shipping-fast"></i>
                </div>
                <h5>Fast Delivery</h5>
                <p>Quick and secure delivery across Kashmir and India with real-time tracking and updates.</p>
            </div>
            <div class="col-lg-3 col-md-6 text-center">
                <div class="category-icon-premium mb-3" style="margin: 0 auto;">
                    <i class="fas fa-headset"></i>
                </div>
                <h5>Expert Support</h5>
                <p>Knowledgeable customer service team ready to help you find the right books for your needs.</p>
            </div>
        </div>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
// Add to cart functionality
document.addEventListener('DOMContentLoaded', function() {
    // Add to cart buttons
    document.querySelectorAll('.add-to-cart-btn').forEach(btn => {
        btn.addEventListener('click', function() {
            const productId = this.dataset.productId;
            if (!productId) return;
            
            // Add loading state
            const originalHTML = this.innerHTML;
            this.innerHTML = '<i class="fas fa-spinner fa-spin"></i>';
            this.disabled = true;
            
            // Simulate API call
            fetch(`{{ url_for('cart.add_to_cart', product_id=0) }}`.replace('0', productId), {
                method: 'POST',
                headers: {
                    'Content-Type': 'application/x-www-form-urlencoded',
                },
                body: `product_id=${productId}&quantity=1`
            }).then(response => {
                if (response.ok) {
                    // Update cart count
                    const cartBadge = document.querySelector('.navbar .badge');
                    if (cartBadge) {
                        const currentCount = parseInt(cartBadge.textContent) || 0;
                        cartBadge.textContent = currentCount + 1;
                    }
                    
                    // Success feedback
                    this.innerHTML = '<i class="fas fa-check"></i>';
                    this.style.background = 'var(--sage-green)';
                    
                    setTimeout(() => {
                        this.innerHTML = originalHTML;
                        this.style.background = '';
                        this.disabled = false;
                    }, 2000);
                } else {
                    // Error feedback
                    this.innerHTML = '<i class="fas fa-exclamation"></i>';
                    setTimeout(() => {
                        this.innerHTML = originalHTML;
                        this.disabled = false;
                    }, 2000);
                }
            }).catch(() => {
                this.innerHTML = originalHTML;
                this.disabled = false;
            });
        });
    });
    
    // Newsletter form
    const newsletterForm = document.querySelector('.newsletter-form');
    if (newsletterForm) {
        newsletterForm.addEventListener('submit', function(e) {
            e.preventDefault();
            const email = this.querySelector('input[type="email"]').value;
            const button = this.querySelector('button');
            
            if (email) {
                const originalHTML = button.innerHTML;
                button.innerHTML = '<i class="fas fa-check"></i> Subscribed!';
                button.style.background = 'var(--sage-green)';
                this.querySelector('input').value = '';
                
                setTimeout(() => {
                    button.innerHTML = originalHTML;
                    button.style.background = '';
                }, 3000);
            }
        });
    }
    
    // Intersection Observer for animations
    const observerOptions = {
        threshold: 0.1,
        rootMargin: '0px 0px -50px 0px'
    };
    
    const observer = new IntersectionObserver((entries) => {
        entries.forEach(entry => {
            if (entry.isIntersecting) {
                entry.target.style.opacity = '1';
                entry.target.style.transform = 'translateY(0)';
            }
        });
    }, observerOptions);
    
    // Observe animated elements
    document.querySelectorAll('.animate-fadeInUp').forEach(el => {
        el.style.opacity = '0';
        el.style.transform = 'translateY(30px)';
        el.style.transition = 'all 0.8s ease-out';
        observer.observe(el);
    });
});
</script>
{% endblock %}